import{r as N,C as w,Y as z,Z as B,u as O,j as a}from"./index-DexmHjjZ.js";import{u as A,o as U,c as V,a as s,d as _}from"./yup-BSwQH9Mr.js";import{I as n}from"./Input-ACSRL8aY.js";import{B as $}from"./Button-rV_nHCNG.js";import{S as x}from"./Select-DweuDon-.js";import{I as k}from"./ImageInput-D90wZnRz.js";const G=[{value:"cook",label:"Bucătar"},{value:"barman",label:"Barman"},{value:"barista",label:"Barista"},{value:"ready",label:"Gata de servit"}],M=V({name:s().required("Numele produsului este obligatoriu"),ingredients:s().required("Ingredientele sunt obligatorii"),nutrients:s().required("Valorile nutritive sunt obligatorii"),allergens:s().required("Alergenii sunt obligatorii"),price:_().required("Prețul este obligatoriu").positive("Prețul trebuie să fie pozitiv"),categoryId:s().notOneOf(["0"],"Categoria este obligatorie").required("Categoria este obligatorie"),initialStatus:s().oneOf(["cook","barman","barista","ready"],"Status invalid").required("Statusul inițial este obligatoriu")}),H=({product:e,isEditing:o=!1})=>{var g,m,d,c,b,p,v;const[l,S]=N.useState(void 0),{data:u,isLoading:E}=w(),{register:i,handleSubmit:f,formState:{errors:r,isValid:I}}=A({resolver:U(M),mode:"onChange",defaultValues:e?{name:e.name,ingredients:e.ingredients,nutrients:e.nutrients,allergens:e.allergens,price:e.price,categoryId:e.category_id,initialStatus:e.initial_status}:void 0}),[j,{isLoading:C}]=z(),[h,{isLoading:y}]=B(),P=C||y,q=O(),L=async t=>{o&&e?await h({id:e.id,photo:l,...t}).unwrap():await j({photo:l,...t}).unwrap(),q({to:"/dashboard/manager"})};return a.jsx("div",{className:"container",children:a.jsxs("form",{className:"middle-column-container",onSubmit:f(L),children:[a.jsx("h1",{children:o?"Editează produsul":"Creaza produs nou"}),a.jsx(n,{name:"name",label:"Nume",type:"text",register:i("name"),error:(g=r.name)==null?void 0:g.message}),a.jsx(n,{name:"price",label:"Pret",type:"number",register:i("price"),error:(m=r.price)==null?void 0:m.message}),a.jsx(x,{name:"categoryId",label:"Categoria",options:[{value:"0",label:"Alegeti categoria"},...(u==null?void 0:u.map(t=>({value:t.id,label:t.name})))||[]],register:i("categoryId"),error:(d=r.categoryId)==null?void 0:d.message}),a.jsx(x,{name:"initialStatus",label:"Status initial",options:G,register:i("initialStatus"),error:(c=r.initialStatus)==null?void 0:c.message}),a.jsx(n,{name:"ingredients",label:"Ingredients",register:i("ingredients"),error:(b=r.ingredients)==null?void 0:b.message}),a.jsx(n,{name:"nutrients",label:"Nutrients",register:i("nutrients"),error:(p=r.nutrients)==null?void 0:p.message}),a.jsx(n,{name:"allergens",label:"Allergens",register:i("allergens"),error:(v=r.allergens)==null?void 0:v.message}),a.jsx(k,{name:"Imagine produs",small:"Încărcați o imagine pentru produs (opțional)",onChange:t=>S(t),initialImage:l,initialImageUrl:e==null?void 0:e.photo_url}),a.jsx($,{text:o?"Salvează modificările":"Creează produs",color:"brand",submit:!0,tall:!0,wide:!0,disabled:!I,loading:P})]})})};export{H as C};
