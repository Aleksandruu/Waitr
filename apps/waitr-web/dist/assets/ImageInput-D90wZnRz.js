import{r as u,j as n}from"./index-DexmHjjZ.js";const w="_input_1njbf_5",x="_add-image_1njbf_9",h={input:w,addImage:x};function j(t){return new Promise((m,o)=>{const s=new FileReader;s.onloadend=()=>{const e=new Image;e.src=s.result,e.onload=()=>{const d=e.width/e.height;let c=e.width,a=e.height;a>150&&(a=150,c=150*d);const r=document.createElement("canvas"),i=r.getContext("2d",{alpha:!0});if(i){r.width=c,r.height=a,i.clearRect(0,0,c,a),i.drawImage(e,0,0,c,a);const l=t.type==="image/png"||t.type==="image/webp"||t.type.includes("png")||t.type.includes("webp")?t.type:"image/png";r.toBlob(p=>{p?m(new File([p],t.name,{type:l})):o(new Error("Failed to create blob"))},l)}else o(new Error("Canvas context not available"))},e.onerror=()=>{o(new Error("Failed to load image"))}},s.readAsDataURL(t)})}const f=({name:t,onChange:m,initialImage:o,initialImageUrl:s,small:e})=>{const[g,d]=u.useState(s||null),c=async a=>{var i;const r=(i=a.target.files)==null?void 0:i[0];if(r){const l=await j(r);m(l);const p=URL.createObjectURL(l);d(p)}};return u.useEffect(()=>{if(o){const a=URL.createObjectURL(o);d(a)}},[o]),u.useEffect(()=>{s&&d(s)},[s]),n.jsxs(n.Fragment,{children:[n.jsxs("label",{htmlFor:"photo",className:h.label,children:[n.jsxs("p",{children:[t,":"]}),n.jsx("small",{children:e}),n.jsx("br",{}),g?n.jsx("img",{className:h.photo,src:g,alt:"Preview"}):n.jsx("div",{className:h.addImage,children:"+"})," "]}),n.jsx("input",{className:h.input,id:"photo",name:"photo",type:"file",onChange:c})]})};export{f as I};
