import{A as y,j as r,n as k,B as N,r as i}from"./index-DDguFcX7.js";import{B as g}from"./Button-jQCboGJ6.js";import{a as u}from"./app.hooks-hgGBFPAf.js";import"./className-CUjXWMz9.js";const j="_products_pyern_1",b={products:j},_="_product_1xkos_1",P="_content_1xkos_18",m={product:_,content:P},S=e=>{const{orderProductId:o,quantity:n,status:c,productName:s,preferences:a,tableNumber:t,orderTime:l}=e,[p,{isLoading:f}]=y(),x=new Date(l).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),h=()=>{p({orderProductId:o,tableNumber:t})};return r.jsxs("div",{className:m.product,children:[r.jsxs("div",{className:m.content,children:[r.jsxs("h2",{children:[s," x",n]}),r.jsxs("p",{children:["Comandat la ",x]})]}),r.jsx(g,{text:"Ready",color:"green",tall:!0,onClick:h,loading:f})]})},I="http://localhost:8080/",d=k(I,{withCredentials:!0,transports:["websocket"]}),L=(e,o,n)=>{if(["cook","barman","barista"].includes(o)){const c=`${o}-${e}`;d.emit("join-location",c),d.off("order-ping"),d.on("order-ping",s=>{n()})}},R=({})=>{const[e,{data:o,isLoading:n,error:c}]=N(),{id:s}=u(t=>t.location),{user:a}=u(t=>t.auth);return i.useEffect(()=>{e()},[e]),i.useEffect(()=>{!s||!a||L(s,a.role,()=>{e()})},[s,a,e]),r.jsx("div",{className:b.products,children:o&&o.length>0?o.map(t=>r.jsx(S,{orderProductId:t.orderProductId,quantity:t.quantity,status:t.status,productName:t.productName,preferences:t.preferences,tableNumber:t.tableNumber,orderTime:t.orderTime},t.orderProductId)):"Nu exista produse momentan!"})},v=R;export{v as component};
