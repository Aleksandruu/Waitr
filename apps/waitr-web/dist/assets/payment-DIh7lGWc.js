import{d as P,r as p,o as c,N as S,j as e}from"./index-Blpx2UYK.js";import{Q as C}from"./QuantityButton-BFt9LYod.js";import{B as w}from"./Button-DKMOCAwU.js";import{u as b,a as q}from"./app.hooks-Cn2D3q4p.js";import"./className-CUjXWMz9.js";const v="_container_1g8mw_1",T="_productItem_1g8mw_23",F="_productInfo_1g8mw_33",B="_price_1g8mw_42",E="_quantity_1g8mw_49",H="_actionArea_1g8mw_55",W="_actionsHeader_1g8mw_71",D="_totalAmount_1g8mw_83",Q="_tipSection_1g8mw_105",k="_tipInputContainer_1g8mw_117",O="_tipInput_1g8mw_117",z="_tipCurrency_1g8mw_132",G="_totalWithTip_1g8mw_137",n={container:v,productItem:T,productInfo:F,price:B,quantity:E,actionArea:H,actionsHeader:W,totalAmount:D,tipSection:Q,tipInputContainer:k,tipInput:O,tipCurrency:z,totalWithTip:G},L=R=>{const{locationSlug:_,tableNumber:h}=P({strict:!1}),o=b(),[I,u]=p.useState("0"),{selectedProductsForPayment:r,tipAmount:l}=q(t=>t.order);p.useEffect(()=>{u(l.toString())},[l]);const m=r.reduce((t,a)=>t+a.price*a.quantity,0),y=m+l;p.useEffect(()=>{o(c.setStatus("payment"))},[o]);const x=t=>{const a=t.target.value;u(a);const s=parseFloat(a)||0;o(c.setTipAmount(s))},{data:i=[],isLoading:U}=S({locationSlug:_||"",table:Number(h)||0}),g=t=>{o(c.addProductToPayment({productId:t.productId}))},j=t=>{o(c.incrementProductForPayment({productId:t}))},A=t=>{o(c.decrementProductForPayment({productId:t}))},f=()=>{o(c.selectAllProductsForPayment())},N=i.length>0&&i.every(t=>{const a=r.find(s=>s.productId===t.productId);return a&&a.quantity===t.quantity});return e.jsxs("div",{className:n.container,children:[i.length>0&&e.jsxs("div",{className:n.actionsHeader,children:[e.jsx(w,{text:"Selectează tot",color:"brand",onClick:f,disabled:N}),e.jsxs("p",{className:n.totalAmount,children:["Subtotal: ",m," lei"]})]}),i.map(t=>{var a,s;return e.jsxs("div",{className:n.productItem,children:[e.jsxs("div",{className:n.productInfo,children:[e.jsx("h3",{children:t.name}),e.jsxs("p",{className:n.price,children:[t.price," lei"]}),e.jsxs("p",{className:n.quantity,children:["Cantitate: ",t.quantity]})]}),e.jsx("div",{className:n.actionArea,children:e.jsx(C,{text:"Plătește",quantity:((a=r.find(d=>d.productId===t.productId))==null?void 0:a.quantity)||0,color:"brand",onClick:()=>g(t),onIncrement:()=>j(t.productId),onDecrement:()=>A(t.productId),disabled:((s=r.find(d=>d.productId===t.productId))==null?void 0:s.quantity)===t.quantity})})]},t.productId)}),i.length>0&&e.jsxs("div",{className:n.tipSection,children:[e.jsx("h3",{children:"Bacșiș"}),e.jsxs("div",{className:n.tipInputContainer,children:[e.jsx("input",{type:"number",min:"0",step:"1",value:I,onChange:x,className:n.tipInput}),e.jsx("span",{className:n.tipCurrency,children:"lei"})]}),e.jsx("div",{className:n.totalWithTip,children:e.jsxs("p",{children:["Total cu bacșiș: ",y," lei"]})})]})]})},Y=L;export{Y as component};
