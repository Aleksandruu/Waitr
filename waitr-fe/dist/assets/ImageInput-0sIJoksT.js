import{r as p,j as t}from"./index-C3QVUPQN.js";const w="_input_1njbf_5",x="_add-image_1njbf_9",d={input:w,addImage:x};function u(c){return new Promise((m,a)=>{const r=new FileReader;r.onloadend=()=>{const e=new Image;e.src=r.result,e.onload=()=>{const g=e.width/e.height;let n=e.width,s=e.height;s>150&&(s=150,n=150*g);const o=document.createElement("canvas"),i=o.getContext("2d");i?(o.width=n,o.height=s,i.drawImage(e,0,0,n,s),o.toBlob(l=>{l?m(new File([l],c.name,{type:"image/jpeg"})):a(new Error("Failed to create blob"))},"image/jpeg")):a(new Error("Canvas context not available"))},e.onerror=()=>{a(new Error("Failed to load image"))}},r.readAsDataURL(c)})}const f=({name:c,onChange:m,initialImage:a,small:r})=>{const[e,h]=p.useState(null),g=async n=>{var o;const s=(o=n.target.files)==null?void 0:o[0];if(s){const i=await u(s);m(i);const l=URL.createObjectURL(i);h(l)}};return p.useEffect(()=>{if(a){const n=URL.createObjectURL(a);h(n)}},[a]),t.jsxs(t.Fragment,{children:[t.jsxs("label",{htmlFor:"photo",className:d.label,children:[t.jsxs("p",{children:[c,":"]}),t.jsx("small",{children:r}),t.jsx("br",{}),e?t.jsx("img",{className:d.photo,src:e,alt:"Preview"}):t.jsx("div",{className:d.addImage,children:"+"})," "]}),t.jsx("input",{className:d.input,id:"photo",name:"photo",type:"file",onChange:g})]})};export{f as I};
