import{d as x,e as h,f as _,b as C,u as F,j as t,o as N,r as b,g as O,O as S}from"./index-CCuYgNzZ.js";import{B as l}from"./Button-C4_vQ40n.js";import{u as g}from"./app.hooks-CYivS1Te.js";import{b as y}from"./byteArrayToFile-uoPBimIa.js";import"./className-CUjXWMz9.js";const B="_bottom-bar_6m8fc_1",L="_bottom-filler_6m8fc_19",p={bottomBar:B,bottomFiller:L},I=({})=>{const{products:a,status:e}=g(c=>c.order),{locationSlug:o,tableNumber:r}=x({strict:!1}),{data:n,refetch:s}=h({locationSlug:o,table:parseInt(r,10)}),[f,{isLoading:m}]=_(),j=C(),u=F(),d=()=>{const c={orderTime:new Date,products:R(a)};f({order:c,locationSlug:o,tableNumber:parseInt(r,10)}),setTimeout(()=>{u({to:"/$locationSlug/$tableNumber",params:{locationSlug:o,tableNumber:r}}),s()},2e3)},v=()=>{j(N.setStatus("checkout")),u({to:"/$locationSlug/$tableNumber/order",params:{locationSlug:o,tableNumber:r}})};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:p.bottomFiller}),t.jsx("div",{className:p.bottomBar,children:e==="empty"?t.jsx(l,{text:"Cheamă ospătar",wider:!0,tall:!0,color:"brand"}):e==="products"?t.jsxs(t.Fragment,{children:[t.jsx(l,{text:"Cheamă ospătar",tall:!0,color:"brand"}),t.jsx(l,{onClick:v,text:"Vezi comanda",tall:!0,color:"brand"})]}):n!=null&&n.length?t.jsx(l,{onClick:d,text:"Adauga la comanda",wider:!0,tall:!0,color:"brand",loading:m,disabled:e==="placed"}):t.jsx(l,{onClick:d,text:"Plasează comanda",wider:!0,tall:!0,color:"brand",loading:m,disabled:e==="placed"})})]})},R=a=>a.map(o=>({id:o.productId,quantity:o.quantity,preferences:""})),U="_navbar_1v7qz_1",k="_nav-filler_1v7qz_25",i={navbar:U,navFiller:k},$=({})=>{const{logoBuffer:a,logoMime:e,name:o}=g(s=>s.location),[r,n]=b.useState("");return b.useEffect(()=>{const s=a&&e?y(a,e):void 0;return console.log("file",e),n(s?URL.createObjectURL(s):void 0),()=>{r&&URL.revokeObjectURL(r)}},[a,e]),t.jsxs(t.Fragment,{children:[t.jsx("nav",{className:i.navbar,children:r?t.jsx("img",{className:i.logo,src:r,alt:"logo"}):t.jsx("h1",{children:o})}),";",t.jsx("div",{className:i.navFiller})]})},D=function(){const{locationSlug:e}=x({strict:!1});return O(e),t.jsxs(t.Fragment,{children:[t.jsx($,{}),t.jsx(S,{}),t.jsx(I,{})]})};export{D as component};
