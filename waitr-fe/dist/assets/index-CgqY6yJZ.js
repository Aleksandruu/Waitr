import{j as s,r as p,b as u,h as j,o as i,R as _,t as y}from"./index-C3QVUPQN.js";import{B as k,c as A}from"./Button-DQX12hWn.js";import{u as N}from"./app.hooks-KUOYCnGq.js";const b="_products_1102y_1",g={products:b},C="_product_1bihk_1",f="_name_1bihk_9",v="_hidden_1bihk_19",P="_price_1bihk_22",S="_photo-and-add-to-cart_1bihk_27",c={product:C,name:f,hidden:v,price:P,photoAndAddToCart:S},T="_quantity-btn_1xor9_1",B={quantityBtn:T},I=({quantity:e,onClick:n,onIncrement:d,onDecrement:t})=>s.jsx(s.Fragment,{children:e?s.jsxs("div",{className:B.quantityBtn,children:[s.jsx("span",{onClick:t,children:"-"}),s.jsx("span",{children:e}),s.jsx("span",{onClick:d,children:"+"})]}):s.jsx(k,{text:"Add to order",onClick:n,color:"brand"})}),q=({product:e})=>{const[n,d]=p.useState(!1),t=u(),o=j(m=>{var h;return((h=m.order.products.find(x=>x.productId===e.id))==null?void 0:h.quantity)||0}),r=()=>{t(i.addProductToOrder({productId:e.id,productName:e.name,productPrice:e.price}))},a=()=>{t(i.increaseQuantityForProduct({productId:e.id}))},l=()=>{t(i.decreaseQuantityForProduct({productId:e.id}))};return s.jsxs("div",{className:c.product,children:[s.jsxs("div",{children:[s.jsx("h3",{className:c.name,onClick:()=>{o||d(!n)},children:e.name}),s.jsx("p",{children:e.ingredients}),s.jsxs("div",{className:n?"":c.hidden,children:[s.jsx("p",{style:{color:"black"},children:"For 100g:"}),s.jsx("p",{children:e.nutrients}),s.jsx("p",{style:{color:"black"},children:"Allergens:"}),s.jsx("p",{children:e.allergens})]}),s.jsxs("p",{className:c.price,children:[e.price," lei"]})]}),s.jsxs("div",{className:c.photoAndAddToCart,children:[e.photoUrl?s.jsx("img",{loading:"lazy",src:e.photoUrl,alt:e.name}):s.jsx("div",{}),s.jsx("div",{className:A(n?"":c.hidden,c.addToCart),children:s.jsx(I,{onClick:r,onIncrement:a,onDecrement:l,quantity:o})})]})]})},E=({})=>{const{products:e,currentOrder:n}=N(r=>r.order),{locationSlug:d}=_.useParams(),{data:t}=y(d),o=u();return p.useEffect(()=>{e.length===0&&n.length===0?o(i.setStatus("empty")):o(i.setStatus("products"))},[e,n]),s.jsx("div",{className:g.products,children:t==null?void 0:t.map(r=>{var a;return s.jsxs("div",{style:{width:"90%"},children:[s.jsx("h2",{children:r.categoryName}),(a=r.products)==null?void 0:a.map(l=>s.jsx(q,{product:l},l.id))]},r.categoryId)})})},D=E;export{D as component};
