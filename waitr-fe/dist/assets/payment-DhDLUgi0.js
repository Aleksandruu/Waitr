import{d as N,b as S,r as u,l as C,o as c,P as b,j as e}from"./index-DzrIMVFX.js";import{Q as w}from"./QuantityButton-CQooDu-m.js";import{B as q}from"./Button-DkkFWPV7.js";import"./className-CUjXWMz9.js";const v="_container_1g8mw_1",T="_productItem_1g8mw_23",F="_productInfo_1g8mw_33",B="_price_1g8mw_42",E="_quantity_1g8mw_49",H="_actionArea_1g8mw_55",W="_actionsHeader_1g8mw_71",D="_totalAmount_1g8mw_83",Q="_tipSection_1g8mw_105",k="_tipInputContainer_1g8mw_117",O="_tipInput_1g8mw_117",z="_tipCurrency_1g8mw_132",G="_totalWithTip_1g8mw_137",n={container:v,productItem:T,productInfo:F,price:B,quantity:E,actionArea:H,actionsHeader:W,totalAmount:D,tipSection:Q,tipInputContainer:k,tipInput:O,tipCurrency:z,totalWithTip:G},L=R=>{const{locationSlug:_,tableNumber:h}=N({strict:!1}),s=S(),[I,p]=u.useState("0"),{selectedProductsForPayment:r,tipAmount:l}=C(t=>t.order);u.useEffect(()=>{p(l.toString())},[l]);const m=r.reduce((t,a)=>t+a.price*a.quantity,0),y=m+l;u.useEffect(()=>{s(c.setStatus("payment"))},[s]);const x=t=>{const a=t.target.value;p(a);const o=parseFloat(a)||0;s(c.setTipAmount(o))},{data:i=[],isLoading:U}=b({locationSlug:_||"",table:Number(h)||0}),g=t=>{s(c.addProductToPayment({productId:t.productId}))},j=t=>{s(c.incrementProductForPayment({productId:t}))},P=t=>{s(c.decrementProductForPayment({productId:t}))},A=()=>{s(c.selectAllProductsForPayment())},f=i.length>0&&i.every(t=>{const a=r.find(o=>o.productId===t.productId);return a&&a.quantity===t.quantity});return e.jsxs("div",{className:n.container,children:[i.length>0&&e.jsxs("div",{className:n.actionsHeader,children:[e.jsx(q,{text:"Selectează tot",color:"brand",onClick:A,disabled:f}),e.jsxs("p",{className:n.totalAmount,children:["Subtotal: ",m," lei"]})]}),i.map(t=>{var a,o;return e.jsxs("div",{className:n.productItem,children:[e.jsxs("div",{className:n.productInfo,children:[e.jsx("h3",{children:t.name}),e.jsxs("p",{className:n.price,children:[t.price," lei"]}),e.jsxs("p",{className:n.quantity,children:["Cantitate: ",t.quantity]})]}),e.jsx("div",{className:n.actionArea,children:e.jsx(w,{text:"Plătește",quantity:((a=r.find(d=>d.productId===t.productId))==null?void 0:a.quantity)||0,color:"brand",onClick:()=>g(t),onIncrement:()=>j(t.productId),onDecrement:()=>P(t.productId),disabled:((o=r.find(d=>d.productId===t.productId))==null?void 0:o.quantity)===t.quantity})})]},t.productId)}),i.length>0&&e.jsxs("div",{className:n.tipSection,children:[e.jsx("h3",{children:"Bacșiș"}),e.jsxs("div",{className:n.tipInputContainer,children:[e.jsx("input",{type:"number",min:"0",step:"1",value:I,onChange:x,className:n.tipInput}),e.jsx("span",{className:n.tipCurrency,children:"lei"})]}),e.jsx("div",{className:n.totalWithTip,children:e.jsxs("p",{children:["Total cu bacșiș: ",y," lei"]})})]})]})},X=L;export{X as component};
