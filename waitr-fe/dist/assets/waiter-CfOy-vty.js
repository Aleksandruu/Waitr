import{b,h as p,j as e,w as y,l as x,i as m,k as v,r as h}from"./index-C3QVUPQN.js";import{c as u,B as l}from"./Button-DQX12hWn.js";const j="_tables-list_1o9co_1",g="_table_1o9co_1",f="_ready_1o9co_32",T="_preparing_1o9co_35",k="_delivered_1o9co_38",N="_payed_1o9co_41",L="_selectedTable_1o9co_44",S="_filler_1o9co_50",o={tablesList:j,table:g,ready:f,preparing:T,delivered:k,payed:N,selectedTable:L,filler:S},w=t=>{const c=b(),{selectedTable:r,tablesStatus:n}=p(s=>s.waiter);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:o.tablesList,children:n&&n.map(s=>{const a=s.status==="ready"?o.ready:s.status==="preparing"?o.preparing:s.status==="delivered"?o.delivered:o.payed;return e.jsx("div",{className:u(o.table,a,r===s.tableNumber?o.selectedTable:""),onClick:()=>{c(y.setSelectedTable(s.tableNumber))},children:s.tableNumber},s.tableNumber)})}),e.jsx("div",{className:o.filler})]})},$="_container_1hzc2_1",z={container:$},C="_product_1a633_1",D="_ready_1a633_27",E="_preparing_1a633_31",O="_delivered_1a633_35",B="_payed_1a633_39",i={product:C,ready:D,preparing:E,delivered:O,payed:B},G=({orderItem:t})=>{const c=new Date(t.orderTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),r=t.status==="ready"?i.ready:["cook","barista","barman"].includes(t.status)?i.preparing:t.status==="delivered"?i.delivered:i.payed;return e.jsxs("div",{className:u(i.product,r),children:[e.jsxs("div",{children:[e.jsxs("h2",{children:[t.name," x",t.quantity]}),e.jsxs("p",{children:["Comandat la ",c]}),["cook","barista","barman"].includes(t.status)&&e.jsx("p",{children:"Se prepara..."})]}),t.status==="payed"?e.jsx("div",{}):t.status==="delivered"?e.jsx(l,{text:"Incaseaza",color:"yellow",tall:!0}):["cook","barista","barman"].includes(t.status)?e.jsx(l,{text:"Livreaza",color:"orange",disabled:!0,tall:!0}):e.jsx(l,{text:"Livreaza",color:"red",tall:!0})]})},P="http://localhost:8080",d=x(P,{withCredentials:!0,transports:["websocket"]}),Q=(t,c)=>{d.emit("join-location",t),d.off("order-ping"),d.on("order-ping",r=>{console.log("Primit order-ping de la socket:",r),c(r.table)})},R=({})=>{const{selectedTable:t,orders:c}=p(a=>a.waiter),{id:r}=p(a=>a.location);m();const[n]=v(),s=c.find(a=>a.table===t);return h.useEffect(()=>{r&&Q(r,a=>{n(a)})},[r,n]),e.jsxs("div",{className:z.container,children:[e.jsx(w,{}),s&&s.products&&s.products.map((a,_)=>e.jsx(G,{orderItem:a},_))]})},A=R;export{A as component};
